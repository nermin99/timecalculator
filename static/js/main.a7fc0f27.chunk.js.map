{"version":3,"sources":["utils/timecalculator.js","components/calculator/index.tsx","utils/helpers.js","App.tsx","reportWebVitals.ts","index.tsx"],"names":["operations","Map","op1","op2","operationsStr","keys","join","evaluate","expression","str","replace","match","exec","toReplace","op","Number","get","evalExpr","input","enclosedExprRegex","RegExp","currExpr","matches","matchAll","hours","minutes","seconds","replaceTimes","parseInt","replaceDurations","times","time","rem","hour","Math","floor","minute","second","secondsToTime","expr","flag","includes","test","checkTimeStroke","Object","values","map","t","h","m","s","entries","unit","val","result","Calculator","useState","setResult","handleEvent","fn","delay","timer","context","this","args","arguments","clearTimeout","setTimeout","apply","debounce","e","type","preventDefault","target","value","className","onKeyUp","autoComplete","placeholder","autoFocus","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a7fc0f27.chunk.js","sourcesContent":["const operations = new Map([\r\n  ['+', (op1, op2) => op1 + op2],\r\n  ['-', (op1, op2) => op1 - op2],\r\n  ['>', (op1, op2) => op2 - op1],\r\n])\r\n\r\nconst operationsStr = [...operations.keys()].join('') // +->\r\n\r\n/**\r\n * Converts explicit time durations to seconds.\r\n * 1h - 20m + 10s ---> 3600 - 1200 + 10\r\n */\r\nconst replaceDurations = (str) => {\r\n  const rx = /(\\d+h)?(\\d+m)?(\\d+s)?/g\r\n  const matches = str.matchAll(rx)\r\n\r\n  for (const [match, hours = 0, minutes = 0, seconds = 0] of matches) {\r\n    if (match === '') continue\r\n\r\n    str = str.replace(\r\n      match,\r\n      parseInt(hours) * 3600 + parseInt(minutes) * 60 + parseInt(seconds)\r\n    )\r\n  }\r\n  return str\r\n}\r\n\r\n/**\r\n * Converts timestrokes (from midnight) to seconds.\r\n * 05:00 > 13:00 ---> 18000 > 46800\r\n */\r\nconst replaceTimes = (str) => {\r\n  const rx = /(\\d{2}):(\\d{2}):?(\\d{2})?/g\r\n  const matches = str.matchAll(rx)\r\n\r\n  for (const [match, hours, minutes, seconds = 0] of matches) {\r\n    str = str.replace(\r\n      match,\r\n      Number(hours) * 3600 + Number(minutes) * 60 + Number(seconds)\r\n    )\r\n  }\r\n  return str\r\n}\r\n\r\n/**\r\n * Evaluate an expression like\r\n * 3600 > 10800 --> 10800 - 3600 = 7200\r\n */\r\nconst evaluate = (expression) => {\r\n  const rx = /(\\d+)\\s?([\\+\\-\\>])\\s?(\\d+)/g\r\n\r\n  let str = `${expression}`.replace('(', '').replace(')', '')\r\n  const match = rx.exec(str)\r\n\r\n  if (match) {\r\n    let [toReplace, op1, op, op2] = match\r\n    op1 = Number(op1)\r\n    op2 = Number(op2)\r\n\r\n    str = str.replace(toReplace, operations.get(op)(op1, op2))\r\n\r\n    return evaluate(str)\r\n  } else {\r\n    return Number(str)\r\n  }\r\n}\r\n\r\n/**\r\n * Get the number of hours, minutes and seconds\r\n * from the total seconds.\r\n */\r\nconst secondsToTime = (seconds) => {\r\n  const time = seconds\r\n  let rem = time\r\n\r\n  const times = {\r\n    hour: Math.floor(rem / (60 * 60)),\r\n    minute: Math.floor(time / 60) % 60,\r\n    second: time % 60,\r\n  }\r\n  return times\r\n}\r\n\r\n/**\r\n * Chech whether timestroke or elapsed time is calculated.\r\n * If '>' is in expression, not a timestroke.\r\n * Regex matches e.g '18:30 + 1h' but not e.g '2h - 30m'.\r\n * TODO: match e.g '1h + 18:30'\r\n */\r\nconst checkTimeStroke = (expr) => {\r\n  let flag = !expr.includes('>') //\r\n  flag = flag && /\\d+\\s?[+-]\\s?\\d+[hms]/g.test(expr)\r\n  return flag\r\n}\r\n\r\nexport const evalExpr = (input) => {\r\n  // const rx = /\\(.+?\\)/g\r\n  const enclosedExprRegex = new RegExp(`\\\\([\\\\d${operationsStr} ]+\\\\)`, 'g')\r\n\r\n  let currExpr = replaceTimes(replaceDurations(input))\r\n  let match = currExpr.match(enclosedExprRegex)\r\n\r\n  while (match) {\r\n    currExpr = currExpr.replace(match[0], evaluate(match[0]))\r\n    match = currExpr.match(enclosedExprRegex)\r\n  }\r\n\r\n  const seconds = evaluate(currExpr)\r\n  const times = secondsToTime(seconds)\r\n\r\n  const isTimeStroke = checkTimeStroke(input)\r\n\r\n  if (isTimeStroke) {\r\n    const [h, m, s] = Object.values(times).map((t) => (t < 10 ? `0${t}` : t))\r\n    return `${h}:${m}` + (s === '00' ? '' : `:${s}`)\r\n  } else {\r\n    const [h, m, s] = Object.entries(times).map(([unit, val]) =>\r\n      val === 0 ? '' : `${val} ${unit}${val === 1 ? '' : 's'} `\r\n    )\r\n    const result = h + m + s\r\n    return result === '' ? '0 hours 0 minutes 0 seconds' : result\r\n  }\r\n}\r\n","import React, { useState } from 'react'\r\nimport { evalExpr } from 'src/utils/timecalculator'\r\nimport { debounce } from 'src/utils/helpers'\r\n\r\nimport './index.css'\r\n\r\nconst DEBOUNCE_DELAY = 500\r\n\r\nconst Calculator = () => {\r\n  const [result, setResult] = useState('')\r\n\r\n  const handleEvent = debounce((e: any) => {\r\n    if (e.type === 'submit') e.preventDefault()\r\n\r\n    const input = e.target.value\r\n\r\n    const result = evalExpr(input)\r\n    const output = input === '' ? '' : result\r\n\r\n    setResult(output)\r\n  }, DEBOUNCE_DELAY)\r\n\r\n  return (\r\n    <div className=\"calculator\">\r\n      <form className=\"calculator-form\">\r\n        <input\r\n          onKeyUp={handleEvent}\r\n          className=\"input\"\r\n          type=\"text\"\r\n          autoComplete=\"off\"\r\n          placeholder=\"08:00 > 17:00\"\r\n          autoFocus\r\n        />\r\n      </form>\r\n      <div className=\"result\">{result}</div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Calculator\r\n","/**\r\n * Debounce function\r\n * @param {Function} fn to be debounced\r\n * @param {Number} delay time in milliseconds\r\n */\r\nexport function debounce(fn, delay) {\r\n  let timer = null\r\n  return function () {\r\n    const context = this\r\n    const args = arguments\r\n    clearTimeout(timer)\r\n    timer = setTimeout(() => {\r\n      fn.apply(context, args)\r\n    }, delay)\r\n  }\r\n}\r\n","import React from 'react'\r\nimport './App.css'\r\nimport Calculator from './components/calculator'\r\n\r\nfunction App() {\r\n  return (\r\n    <div className=\"App\">\r\n      <Calculator />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import { ReportHandler } from 'web-vitals'\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry)\r\n      getFID(onPerfEntry)\r\n      getFCP(onPerfEntry)\r\n      getLCP(onPerfEntry)\r\n      getTTFB(onPerfEntry)\r\n    })\r\n  }\r\n}\r\n\r\nexport default reportWebVitals\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport './index.css'\r\nimport App from './App'\r\nimport reportWebVitals from './reportWebVitals'\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n)\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals()\r\n"],"sourceRoot":""}